import{_ as e,a,c as l,d as o,e as s,r,w as i,g as t,t as n,b as p,l as u,h as c,j as d,y as f,E as m}from"./index-e507caa2.js";import{L as v}from"./loading-967d10a4.js";const g=e({},[["render",function(e,r){const i=a("font-awesome-icon");return l(),o("div",null,[s(i,{icon:"fa-solid fa-cloud-arrow-up"})])}],["__file","C:/Program Files/Workspace/reqm-vue3/src/icons/common/uploadCloud.vue"]]),h={class:"el-upload__text"},_={class:"el-upload__tip"},z=e({__name:"UploadFiles",props:{size:{type:String,required:!0},plain:{type:Boolean},step:{type:String,required:!0}},emits:["get-children"],setup(e,{emit:z}){let y=r(!1),b=r(""),x=r(!0),O=r(!1);const S=e,w=z;S.size&&(b.value=S.size,"large"===S.size&&(x.value=!1));let k=r([]),j=r([]);const q=(e,a)=>{if(a.length){let l=[],o=0;const s=10485760;for(const[e,r]of Object.entries(a))l.push(r.name.replace(/.+\./,"")),o+=r.size;for(const e of l){if(!1===(-1===["exe","iso","zip","gzip","7z","rar","tar","wim"].indexOf(e.toLowerCase()))){for(m.error(u("It doesn't allow to attach .EXE or .ISO or compressed files"));a.length;)a.pop();for(;l.length;)l.pop();for(;k.value.length;)k.value.pop();for(;j.value.length;)j.value.pop();return!1}}if(o>s){for(m.error(u("Total file size should be less than 10MB"));a.length;)a.pop();for(;l.length;)l.pop();for(;k.value.length;)k.value.pop();for(;j.value.length;)j.value.pop();return!1}if(a.findIndex((a=>a.name===e.name))!==a.findLastIndex((a=>a.name===e.name)))return m.info(u("Duplicate file")),a.pop(),!1;k.value=JSON.parse(JSON.stringify(a)),j.value.push(e)}else j.value=[];w("get-children",j.value)},C=(e,a)=>{k.value=JSON.parse(JSON.stringify(a)),j.value.forEach(((a,l)=>{a.name===e.name&&j.value.splice(l,1)})),w("get-children",j.value)};return(e,r)=>{const m=a("el-upload");return l(),o("span",{id:"upload-container",class:f(p(b))},[s(m,{drag:"",multiple:"",action:"#","file-list":p(k),"auto-upload":!1,"on-change":q,"on-remove":C,class:f(p(O)?"is-disabled":""),disabled:p(O)},{tip:i((()=>[t("div",_,n(p(u)("Total file size should be less than 10MB")),1)])),default:i((()=>[p(y)?(l(),c(p(v),{key:0,class:"el-icon--upload","auto-height":!0})):(l(),c(p(g),{key:1,class:"el-icon--upload"})),t("div",h,[d(n(p(u)("Drop your files here, or"))+" ",1),t("em",null,n(p(u)("click to select files")),1)])])),_:1},8,["file-list","class","disabled"])],2)}}},[["__file","C:/Program Files/Workspace/reqm-vue3/src/components/UploadFiles.vue"]]);export{z as U};
