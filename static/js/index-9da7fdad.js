import{_ as e,a as l,c as a,d as t,e as n,r as o,v as i,D as s,o as c,n as r,f as d,w as u,b as p,l as m,h as v,j as f,t as b,F as g,q as y,g as _,i as w,X as h,E as k,G as R,Y as q,Z as T,$ as A,a0 as N,O as j,a1 as C,a2 as P,y as U,a3 as B,p as F,k as x}from"./index-286476da.js";import{F as S}from"./FullLoading-191839ce.js";import{u as D}from"./request-91798536.js";import{P as I}from"./pen-aeb855be.js";import{T as O}from"./TopTitle-283234b8.js";import{F as V}from"./file-be3fcb2d.js";import{h as $,v as E}from"./useValidate-1451d16f.js";import{d as W}from"./useDate-3485ccb1.js";import{U as z}from"./UploadFiles-90a46623.js";import"./loading-b4b972c1.js";const K=e({},[["render",function(e,o){const i=l("font-awesome-icon");return a(),t("div",null,[n(i,{icon:"fa-solid fa-check"})])}],["__file","C:/Program Files/Workspace/reqm-vue3/src/icons/common/check.vue"]]);const L=e({},[["render",function(e,o){const i=l("font-awesome-icon");return a(),t("div",null,[n(i,{icon:"fa-solid fa-xmark"})])}],["__file","C:/Program Files/Workspace/reqm-vue3/src/icons/common/cancel.vue"]]);const M=e({},[["render",function(e,o){const i=l("font-awesome-icon");return a(),t("div",null,[n(i,{icon:"fa-solid fa-arrow-up-from-bracket"})])}],["__file","C:/Program Files/Workspace/reqm-vue3/src/icons/common/upload.vue"]]);const Y=e({},[["render",function(e,o){const i=l("font-awesome-icon");return a(),t("div",null,[n(i,{icon:"fa-solid fa-calendar-days"})])}],["__file","C:/Program Files/Workspace/reqm-vue3/src/icons/common/calendar.vue"]]),G={class:"mr-3"},X=["href","download"],Z={class:"ce-dialog-footer-btn"},H=e({__name:"ApproveBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const q=e,T=o({}),A=o(!1),N=o(""),j=i(),C=s().params.reqNo,P=`https://34.226.170.80:7777/uploads/${C}`,U=o({}),B=o({}),F=o(!1),x=o(!1),S=async()=>{B.value.reviewerReply.result="Approved",F.value=!0,setTimeout((async()=>{await h(C,B.value).then((()=>{k.success(m("Approve evidence successfully")),j.push("/reload")}))}),2e3)},I=async()=>{R.prompt(m("Please leave a reason for rejection"),m("Reject evidence"),{confirmButtonText:m("Submit"),cancelButtonText:m("Cancel"),inputPlaceholder:m("Please leave a reason for rejection"),inputType:"textArea",buttonSize:"small"}).then((({value:e,action:l})=>{B.value.reviewerReply.result="Rejected",B.value.reviewerReply.comments=e,F.value=!0,setTimeout((async()=>{await h(C,B.value).then((()=>{F.value=!1,k.success(m("Reject evidence successfully")),j.push("/reload")}))}),2e3)})).catch((()=>{k({type:"info",message:m("Action cancelled")})}))};return c((()=>T.value=D())),r(T,(async()=>{A.value=await T.value.getPermission.approve,N.value=await T.value.getSimpleStep;const e=await T.value.getEvidence,l=new Date;N.value.length&&$(e)&&"Done"!==N.value&&"Cancel"!==N.value&&(U.value={updateDate:e[N.value].updateDate,uploadFiles:Object.assign({},e[N.value].uploadFiles)},B.value={step:N.value,reviewerReply:{reviewDate:l}})})),(e,o)=>{const i=l("el-button"),s=l("el-tooltip"),c=l("el-descriptions-item"),r=l("el-descriptions"),h=l("el-dialog");return a(),t("span",G,[d(" Approve button "),n(s,{content:p(m)(q.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(i,{icon:q.icon,plain:"",circle:"",type:"success",disabled:!p(A),onClick:o[0]||(o[0]=e=>x.value=!0)},null,8,["icon","disabled"])])),_:1},8,["content"]),d(" Approve evidence dialog "),n(h,{modelValue:p(x),"onUpdate:modelValue":o[1]||(o[1]=e=>w(x)?x.value=e:null),title:p(m)("Approve evidence"),width:"500px"},{default:u((()=>[p($)(p(U))?(a(),v(r,{key:0,id:"uApprove-table",column:"1",border:""},{default:u((()=>[n(c,{label:p(m)("Upload date")},{default:u((()=>[f(b(p(W)(p(U).updateDate)),1)])),_:1},8,["label"]),n(c,{label:p(m)("Evidence")},{default:u((()=>[(a(!0),t(g,null,y(p(U).uploadFiles,((e,l)=>(a(),t("div",{key:l},[_("a",{class:"ce-link",target:"_blank",href:`${P}/${p(N)}/${e.fileName}`,download:e.originalName},[n(p(V),{class:"mr-1"}),f(" "+b(e.originalName),1)],8,X)])))),128))])),_:1},8,["label"])])),_:1})):d("v-if",!0),d(" Submit button (Reject / Approve) "),_("div",Z,[n(i,{loading:p(F),onClick:I},{default:u((()=>[f(b(p(m)("Reject")),1)])),_:1},8,["loading"]),n(i,{type:"primary",loading:p(F),onClick:S},{default:u((()=>[f(b(p(m)("Approve")),1)])),_:1},8,["loading"])])])),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-04e068cc"],["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/fnBtns/ApproveBtn.vue"]]),J={class:"mr-1"},Q={class:"ce-dialog-footer-btn"},ee=e({__name:"CancelBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const v=o({}),g=o(!1),y=s().params.reqNo,h=o(!1),T=i(),A=o(!1),N=e,j=o({applyDate:new Date,applicantName:"",applicantId:"",reason:""}),C=async()=>{R.confirm(m("Are you sure to cancel this request? This action cannot be undone"),"",{confirmButtonText:m("OK"),cancelButtonText:m("Cancel"),type:"warning"}).then((async()=>{h.value=!0,await q(y,j.value).then((e=>{if(h.value=!1,200===e.code)k.success(m("Apply for cancellation successfully"));else k.error(m("Failed to apply for cancellation"));T.push("/reload")}))})).catch((()=>{k.info(m("Action cancelled"))}))};return c((()=>v.value=D())),r(v,(async e=>{const l=await v.value.getApplicant;g.value=await v.value.getPermission.cancel,$(l)&&(j.value.applicantName=l[0],j.value.applicantId=l[1])})),(e,o)=>{const i=l("el-button"),s=l("el-tooltip"),c=l("el-descriptions-item"),r=l("el-input"),v=l("el-descriptions"),y=l("el-dialog");return a(),t("span",J,[d(" Cancel button "),n(s,{content:p(m)(N.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(i,{icon:N.icon,plain:"",circle:"",type:"danger",disabled:!p(g),onClick:o[0]||(o[0]=e=>A.value=!0)},null,8,["icon","disabled"])])),_:1},8,["content"]),n(y,{modelValue:p(A),"onUpdate:modelValue":o[2]||(o[2]=e=>w(A)?A.value=e:null),title:p(m)("Cancel this request"),width:"450px"},{default:u((()=>[n(v,{id:"cancellation-table",column:"1",border:""},{default:u((()=>[n(c,{label:p(m)("Application date")},{default:u((()=>[f(b(p(W)(p(j).applyDate)),1)])),_:1},8,["label"]),n(c,{label:p(m)("Applicant")},{default:u((()=>[f(b(p(j).applicantName),1)])),_:1},8,["label"]),n(c,{label:p(m)("Reason")},{default:u((()=>[n(r,{modelValue:p(j).reason,"onUpdate:modelValue":o[1]||(o[1]=e=>p(j).reason=e),type:"textarea",placeholder:p(m)("Please leave the reason for cancellation here")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),_("div",Q,[n(i,{type:"primary",loading:p(h),onClick:C},{default:u((()=>[f(b(p(m)("Submit")),1)])),_:1},8,["loading"])])])),_:1},8,["modelValue","title"])])}}},[["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/fnBtns/CancelBtn.vue"]]),le={class:"mr-3"},ae={class:"ce-dialog-footer-btn"},te=e({__name:"EvidenceBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const v=e,g=o({}),y=i(),h=o(!1),R=s().params.reqNo,q=o(""),j=o(!1),C=T(""),P=o([]),U=o(!1),B=async e=>{P.value=Object.assign([],e)},F=async()=>{j.value=!0;let e=[];if(!P.value.length)return k.info(m("No files selected")),j.value=!1;{const l=new FormData;for await(const e of P.value)l.append("files",e.raw);const a=await A(l,R,q.value);e=Object.assign([],a.data)}if(e.length){let l=[];e.forEach((e=>{const{fileName:a,originalName:t}=e;l.push({fileName:a,originalName:t})}));const a={step:q.value,updateDate:new Date,uploadFiles:l};await N(R,a).then((()=>{setTimeout((()=>{k.success(m("Upload to server successfully")),y.push("/reload")}),1500)})).catch((()=>{k.error(m("Failed to upload files")),j.value=!1}))}else j.value=!1};return c((()=>g.value=D())),r(g,(async e=>{h.value=await g.value.getPermission.evidence,q.value=await g.value.getSimpleStep,C.value=await g.value.getReqType})),(e,o)=>{const i=l("el-button"),s=l("el-tooltip"),c=l("el-dialog");return a(),t("span",le,[d(" Upload evidence button "),n(s,{content:p(m)(v.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(i,{icon:v.icon,plain:"",circle:"",type:"primary",disabled:!p(h),onClick:o[0]||(o[0]=e=>U.value=!0)},null,8,["icon","disabled"])])),_:1},8,["content"]),d(" Upload evidence dialog "),n(c,{modelValue:p(U),"onUpdate:modelValue":o[1]||(o[1]=e=>w(U)?U.value=e:null),title:p(m)("Upload evidence"),width:"400px"},{default:u((()=>[n(p(z),{size:"large",plain:false,step:p(q),onGetChildren:B},null,8,["step"]),_("div",ae,[n(i,{type:"primary",disabled:p(j),onClick:F},{default:u((()=>[f(b(p(m)("Upload to server")),1)])),_:1},8,["disabled"])])])),_:1},8,["modelValue","title"])])}}},[["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/fnBtns/EvidenceBtn.vue"]]),ne={class:"mr-3"},oe={key:0,class:"ce-validate p-1"},ie={class:"ce-dialog-footer-btn"},se=e({__name:"PostponeBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const v=o({}),g=o(!1),y=i(),h=s().params.reqNo,R=D().getReqType,q=o(!1),T=o(!1),A=o([]);let N=j({UAT1:null,UAT2:null,release:null,monitor:null});const P=e;c((()=>v.value=D())),r(v,(async e=>{const l=await v.value.getSchedule;if(g.value=await v.value.getPermission.postpone,$(l)){for(;A.value.length;)A.value.pop();for(const[e,a]of Object.entries(l)){if(("release"===e||"monitor"===e)&&!l[e])break;A.value.push({stage:e,title:a.title,exp:a.exp.new?W(a.exp.new):"undefined",rescheduling:a.exp.old.length,state:a.state}),N[e]=W(a.exp.new)}}}));let U=j({UAT1:"",UAT2:"",release:"",monitor:""});const B={Proceeding:{disabled:!1,placeholder:"Pick a date"},Reviewing:{disabled:!1,placeholder:"Pick a date"},Cancel:{disabled:!0,placeholder:"Item has been closed"},Done:{disabled:!0,placeholder:"Item has been closed"},Rejected:{disabled:!1,placeholder:"Pick a date"}},F=async()=>{if(N.UAT1||N.UAT2||N.release||N.monitor){let e={UAT1:W(N.UAT1),UAT2:W(N.UAT2),release:W(N.release),monitor:W(N.monitor)};if(U.UAT2=E(e.UAT1,e.UAT2,"UAT1","UAT2"),U.release="Project"===R?E(e.UAT2,e.release,"UAT2","Release"):"",U.monitor="Project"===R?E(e.release,e.monitor,"release","Monitor 1 lot"):"",!U.UAT2.length&&!U.release.length&&!U.monitor.length){const l=v.value.getReqType,a=Object.assign({type:l},e);q.value=!0,setTimeout((async()=>{await C(h,a).then((e=>{if(q.value=!1,200===e.code)k.success(m("Reschedule successfully")),y.push("/reload");else k.error(m("Failed to reschedule")),N={UAT1:"",UAT2:"",release:"",monitor:""}}))}),2e3)}}else k.warning(m("Please fill in this field")),U={UAT1:"",UAT2:"",release:"",monitor:""}};return(e,o)=>{const i=l("el-button"),s=l("el-tooltip"),c=l("el-table-column"),r=l("el-date-picker"),v=l("el-table"),y=l("el-dialog");return a(),t("span",ne,[n(s,{content:p(m)(P.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(i,{icon:P.icon,plain:"",circle:"",type:"warning",disabled:!p(g),onClick:o[0]||(o[0]=e=>T.value=!0)},null,8,["icon","disabled"])])),_:1},8,["content"]),n(y,{modelValue:p(T),"onUpdate:modelValue":o[1]||(o[1]=e=>w(T)?T.value=e:null),title:p(m)("Re-schedule"),width:"500"},{default:u((()=>[n(v,{id:"postpone-table",data:p(A)},{default:u((()=>[n(c,{align:"center",prop:"title",width:"135"}),n(c,{align:"center",prop:"exp",label:p(m)("Expect date"),width:"95"},null,8,["label"]),n(c,{align:"center",prop:"rescheduling",label:p(m)("Rescheduling times"),width:"100"},null,8,["label"]),n(c,{align:"center",label:`${p(m)("Postpone to")}...`},{default:u((e=>[n(r,{modelValue:p(N)[e.row.stage],"onUpdate:modelValue":l=>p(N)[e.row.stage]=l,type:"date",size:"small",format:"YYYY/MM/DD",placeholder:p(m)(B[e.row.state].placeholder),disabled:B[e.row.state].disabled,clearable:!1,editable:!1},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),""!==p(U)[e.row.stage]?(a(),t("div",oe,b(p(m)(p(U)[e.row.stage])),1)):d("v-if",!0)])),_:1},8,["label"])])),_:1},8,["data"]),_("div",ie,[n(i,{type:"primary",loading:p(q),onClick:F},{default:u((()=>[f(b(p(m)("Submit")),1)])),_:1},8,["loading"])])])),_:1},8,["modelValue","title"])])}}},[["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/fnBtns/PostponeBtn.vue"]]),ce={class:"mr-3"},re=e({__name:"RevNewBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const v=e,f=o({}),b=o(!1),g=i(),y=s().params.reqNo,_=()=>g.push({path:`/review/new/${y}`,replace:!0});return c((()=>f.value=D())),r(f,(async()=>b.value=await f.value.getPermission.revNew)),(e,o)=>{const i=l("el-button"),s=l("el-tooltip");return a(),t("span",ce,[d(" Review new request button "),n(s,{content:p(m)(v.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(i,{icon:v.icon,plain:"",circle:"",type:"success",disabled:!p(b),onClick:_},null,8,["icon","disabled"])])),_:1},8,["content"])])}}},[["__scopeId","data-v-2a158b24"],["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/fnBtns/RevNewBtn.vue"]]),de={class:"mr-3"},ue=e({__name:"EditNewBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const v=e,f=o({}),b=o(!1),g=i(),y=s().params.reqNo,_=()=>g.push({path:`/edit/${y}`,replace:!0});return c((()=>f.value=D())),r(f,(async e=>b.value=await f.value.getPermission.editNew)),(e,o)=>{const i=l("el-button"),s=l("el-tooltip");return a(),t("span",de,[d(" Edit new request button "),n(s,{content:p(m)(v.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(i,{icon:v.icon,plain:"",circle:"",type:"primary",disabled:!p(b),onClick:_},null,8,["icon","disabled"])])),_:1},8,["content"])])}}},[["__scopeId","data-v-42a2b791"],["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/fnBtns/EditNewBtn.vue"]]),pe=e({__name:"TopButtons",setup(e){const l=`Request #${s().params.reqNo}`,t=D().getReqStatus,o=["Reviewing","Rejected","Returned"],i={tip:{approve:"Approve evidence",upload:"Upload evidence",postpone:"Reschedule",cancel:"Cancel this request",revNew:"Approve this request",editNew:"Edit this request"},icon:{approve:K,upload:M,postpone:Y,cancel:L,revNew:K,editNew:I}};return(e,s)=>(a(),v(p(O),null,P({title:u((()=>[f(b(l))])),_:2},[o.includes(p(t))?{name:"align-right",fn:u((()=>[n(p(re),{icon:i.icon.revNew,tip:i.tip.revNew},null,8,["icon","tip"]),n(p(ue),{icon:i.icon.editNew,tip:i.tip.editNew},null,8,["icon","tip"])])),key:"1"}:{name:"align-right",fn:u((()=>[n(p(H),{icon:i.icon.approve,tip:i.tip.approve},null,8,["icon","tip"]),n(p(te),{icon:i.icon.upload,tip:i.tip.upload},null,8,["icon","tip"]),n(p(se),{icon:i.icon.postpone,tip:i.tip.postpone},null,8,["icon","tip"]),n(p(ee),{icon:i.icon.cancel,tip:i.tip.cancel},null,8,["icon","tip"])])),key:"0"}]),1024))}},[["__scopeId","data-v-98d658fe"],["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/TopButtons.vue"]]),me={class:"detail-collapse"},ve={key:0,class:"m-2 multiple-el-descriptions"},fe={key:1,class:"ce-gray-color-italic"},be={key:0},ge={key:1,class:"ce-gray-color-italic"},ye={key:0,class:"ce-gray-color-italic"},_e={key:1},we=e({__name:"BasicInfoBlock",setup(e){const i=D(),s=o({}),r=j({Done:"success",Cancel:"info",Proceeding:"primary",Rejected:"danger",Returned:"warning",Reviewing:"warning"});return c((()=>s.value=i.getBasicInfo)),(e,o)=>{const i=l("font-awesome-icon"),c=l("el-descriptions-item"),y=l("el-tag"),w=l("el-descriptions"),h=l("el-collapse-item");return a(),t(g,null,[d(" basic information block "),n(h,{name:"1"},{title:u((()=>[_("div",me,[n(i,{icon:"fa-solid fa-thumbtack"}),f(" "+b(p(m)("Basic Info")),1)])])),default:u((()=>[p($)(p(s))?(a(),t("div",ve,[n(w,{column:"2",border:""},{default:u((()=>[n(c,{label:p(m)("ReqNo")},{default:u((()=>[f(b(p(s).reqNo),1)])),_:1},8,["label"]),n(c,{label:p(m)("Type")},{default:u((()=>[p(s).type?(a(),v(y,{key:0,size:"small"},{default:u((()=>[f(b(p(s).type),1)])),_:1})):(a(),t("span",fe,"N/A"))])),_:1},8,["label"]),n(c,{label:p(m)("Request name")},{default:u((()=>[f(b(p(s).reqName),1)])),_:1},8,["label"]),n(c,{label:p(m)("Status")},{default:u((()=>[n(y,{size:"small",type:p(r)[p(s).status]},{default:u((()=>[f(b(p(s).status),1)])),_:1},8,["type"])])),_:1},8,["label"]),n(c,{label:p(m)("Requester")},{default:u((()=>[f(b(p(s).reqrName),1)])),_:1},8,["label"]),n(c,{label:p(m)("IT")},{default:u((()=>[f(b(p(s).pgrName),1)])),_:1},8,["label"]),n(c,{label:p(m)("Issue date")},{default:u((()=>[f(b(p(W)(p(s).issueDate)),1)])),_:1},8,["label"]),n(c,{label:p(m)("Review date")},{default:u((()=>[p(s).review.date?(a(),t("span",be,b(p(W)(p(s).review.date)),1)):(a(),t("span",ge,"N/A"))])),_:1},8,["label"]),n(c,{label:p(m)("Lead time (day)")},{default:u((()=>[p(s).leadTime<0?(a(),t("span",ye,"N/A")):(a(),t("span",_e,b(p(s).leadTime),1))])),_:1},8,["label"]),n(c,{label:p(m)("Review duration (day)")},{default:u((()=>[f(b(p(s).reviewDuration),1)])),_:1},8,["label"])])),_:1}),n(w,{column:"1",border:""},{default:u((()=>["Rejected"===p(s).status||"Returned"===p(s).status?(a(),v(c,{key:0,label:p(m)("Review comments")},{default:u((()=>[f(b(p(s).approveComments),1)])),_:1},8,["label"])):d("v-if",!0)])),_:1})])):d("v-if",!0)])),_:1})],2112)}}},[["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/BasicInfoBlock.vue"]]),he={class:"detail-collapse"},ke={key:0,class:"m-2 multiple-el-descriptions"},Re={key:0,class:"ce-gray-color-italic"},qe={key:1},Te=["href","download"],Ae={class:"inline-flex"},Ne={key:0},je=["src"],Ce=e({__name:"ScopeBlock",setup(e){const i=D(),s=i.getReqNo,v="https://34.226.170.80:7777/uploads/attached_files/",w=["jpg","jpeg","gif","png","svg"],h=o({}),k=j([]);return c((()=>h.value=i.getScope)),r(h,(()=>{if($(h.value))for(const[e,l]of Object.entries(h.value.attachedFiles)){const e=Object.assign({},l),{originalName:a}=l;let t=a.split(".").slice(-1)[0];e.ext=t,k.push(e)}})),(e,o)=>{const i=l("font-awesome-icon"),c=l("el-descriptions-item"),r=l("el-descriptions"),R=l("el-collapse-item");return a(),t(g,null,[d(" Scope block "),n(R,{name:"3"},{title:u((()=>[_("div",he,[n(i,{icon:"fa-solid fa-thumbtack"}),f(" "+b(p(m)("Scope")),1)])])),default:u((()=>[p($)(p(h))?(a(),t("div",ke,[n(r,{column:"2",border:""},{default:u((()=>[n(c,{label:p(m)("Plant")},{default:u((()=>[f(b(p(h).plant),1)])),_:1},8,["label"]),n(c,{label:p(m)("Device")},{default:u((()=>[f(b(p(h).device),1)])),_:1},8,["label"]),n(c,{label:p(m)("Stage")},{default:u((()=>[f(b(p(h).stage),1)])),_:1},8,["label"]),n(c,{label:p(m)("Tester")},{default:u((()=>[f(b(p(h).tester),1)])),_:1},8,["label"]),n(c,{label:p(m)("Customer")},{default:u((()=>[f(b(p(h).customer),1)])),_:1},8,["label"]),n(c,{label:p(m)("Equipment")},{default:u((()=>[f(b(p(h).equipment),1)])),_:1},8,["label"]),n(c,{label:p(m)("System")},{default:u((()=>[f(b(p(h).system),1)])),_:1},8,["label"])])),_:1}),n(r,{column:"1",border:""},{default:u((()=>[n(c,{label:p(m)("Purpose")},{default:u((()=>[f(b(p(h).purpose),1)])),_:1},8,["label"]),n(c,{label:p(m)("Attached files")},{default:u((()=>[0===p(k).length?(a(),t("span",Re,b(p(m)("There is no file attached")),1)):(a(),t("span",qe,[(a(!0),t(g,null,y(p(k),((e,l)=>(a(),t("div",{key:l,class:"attachedFiles-container"},[_("a",{class:"ce-link",href:v+e.fileName,download:p(s)+"_attachment_"+e.originalName,target:"_blank"},[_("div",Ae,[n(p(V),{class:"mr-1"}),f(" "+b(e.originalName),1)]),-1!==w.indexOf(e.ext.toLowerCase())?(a(),t("div",Ne,[_("img",{src:`${v}/${e.fileName}`},null,8,je)])):d("v-if",!0)],8,Te)])))),128))]))])),_:1},8,["label"])])),_:1})])):d("v-if",!0)])),_:1})],2112)}}},[["__scopeId","data-v-5e75f9a4"],["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/ScopeBlock.vue"]]),Pe=e=>(F("data-v-3c7ba831"),e=e(),x(),e),Ue={class:"detail-collapse"},Be={key:0,class:"schedule-container"},Fe=Pe((()=>_("h4",null,"IT start coding",-1))),xe=Pe((()=>_("br",null,null,-1))),Se={class:"mt-2"},De={class:"schedule-details rounded p-2 m-2"},Ie={class:"ce-blue-color ce-text-bold"},Oe=Pe((()=>_("br",null,null,-1))),Ve={class:"mt-2"},$e={class:"schedule-details"},Ee={key:0,class:"ce-blue-color ce-text-bold"},We={key:1},ze={class:"schedule-details"},Ke={class:"ce-blue-color ce-text-bold"},Le={class:"schedule-details"},Me=Pe((()=>_("div",null,"KPI:",-1))),Ye=Pe((()=>_("h4",null,"Done",-1))),Ge=e({__name:"ScheduleBlock",setup(e){const i={Proceeding:{size:"large",type:"primary",icon:B},Done:{size:"normal",type:"success",icon:K},Cancel:{size:"normal",color:"#999",icon:L},Reviewing:{size:"large",type:"warning",icon:B},Rejected:{size:"large",type:"warning",icon:B}},s=D(),r=o({}),w=o({});c((()=>{w.value=s.getTurnOnDate;const e=s.getSchedule;for(const[l,a]of Object.entries(e)){if(("release"===l||"monitor"===l)&&!e[l])break;r.value[l]=e[l]}}));const h=e=>parseInt(e,10)>0;return(e,o)=>{const s=l("font-awesome-icon"),c=l("el-card"),k=l("el-timeline-item"),R=l("el-timeline"),q=l("el-collapse-item");return a(),t(g,null,[d(" schedule block "),n(q,{name:"4"},{title:u((()=>[_("div",Ue,[n(s,{icon:"fa-solid fa-thumbtack"}),f(" "+b(p(m)("Schedule")),1)])])),default:u((()=>[p($)(p(r))?(a(),t("div",Be,[n(R,null,{default:u((()=>[d(" Turn on date "),n(k,{center:""},{default:u((()=>[n(c,null,{default:u((()=>[_("span",null,[Fe,_("h5",null,"("+b(p(m)("Owner"))+": "+b(p(w).owner)+")",1)]),xe,_("span",Se,[_("div",De,[_("div",null,b(p(m)("Turn on date"))+":",1),_("div",Ie,b(p(W)(p(w).date)),1)])])])),_:1})])),_:1}),d(" UAT1 ~ Monitor 1 lot "),(a(!0),t(g,null,y(p(r),((e,l)=>(a(),v(k,{key:l,size:i[e.state].size,icon:i[e.state].icon,type:i[e.state].type,color:i[e.state].color,center:""},{default:u((()=>[n(c,null,{default:u((()=>[_("span",null,[_("h4",null,b(e.title),1),_("h5",null,"("+b(p(m)("Owner"))+": "+b(e.owner)+")",1)]),Oe,_("span",Ve,[_("div",$e,[_("div",null,b(p(m)("Actual date"))+":",1),e.act?(a(),t("div",Ee,b(p(W)(e.act)),1)):(a(),t("div",We,b("Rejected"===e.state?`${p(m)("Rejected,")}\n${p(m)("re-uploading")}`:e.state),1))]),_("div",ze,[_("div",null,b(p(m)("Expect date"))+":",1),_("div",null,[(a(!0),t(g,null,y(e.exp.old,(e=>(a(),t("div",{key:e,class:"ce-line-through"},b(p(W)(e)),1)))),128)),_("div",Ke,b(p(W)(e.exp.new)),1)])]),_("div",Le,[Me,_("div",null,[f(b(p(m)("Rescheduling"))+": ",1),_("span",{class:U(h(e.KPI.reschedule)?"ce-red-color ce-text-bold":"")},b(e.KPI.reschedule),3)]),_("div",null,[f(b(p(m)("Delay"))+": ",1),_("span",{class:U(h(e.KPI.delay)?"ce-red-color ce-text-bold":"")},b(e.KPI.delay),3)])])])])),_:2},1024)])),_:2},1032,["size","icon","type","color"])))),128)),d(" Done "),n(k,{center:""},{default:u((()=>[n(c,null,{default:u((()=>[Ye])),_:1})])),_:1})])),_:1})])):d("v-if",!0)])),_:1})],2112)}}},[["__scopeId","data-v-3c7ba831"],["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/ScheduleBlock.vue"]]),Xe={class:"detail-collapse"},Ze={key:0},He={key:0,class:"ce-gray-color-italic"},Je={key:1},Qe=["href","download"],el={key:0},ll=["src"],al=e({__name:"EvidenceBlock",setup(e){const i=D(),s=i.getReqNo,r=o({}),w=`https://34.226.170.80:7777/uploads/${s}`,h=["jpg","jpeg","gif","png","svg"];return c((()=>{const e=i.getReqType,l=i.getEvidence;r.value=Object.assign({},l);for(const[a,t]of Object.entries(l)){const{uploadFiles:l,uploadReply:n}=t;if(("release"===a||"monitor"===a)&&"OneTime"===e)break;if(l.length&&l.forEach(((e,l)=>{let t=e.originalName.split(".").slice(-1)[0];r.value[a].uploadFiles[l].ext=t})),n)switch(n){case"Reviewing":r.value[a].state="Pending approval",r.value[a].class="ce-gray-color-italic";break;case"Rejected":r.value[a].state="Rejected, re-uploading",r.value[a].class="ce-gray-color-italic";break;case"Approved":r.value[a].state="Approved"}else r.value[a].state="Not uploaded yet",r.value[a].class="ce-gray-color-italic";switch(a){case"UAT1":r.value[a].title="IT buyoff (UAT1)";break;case"UAT2":r.value[a].title="User buyoff (UAT2)";break;case"release":r.value[a].title="Release";break;case"monitor":r.value[a].title="Monitor 1 lot"}}})),(e,o)=>{const i=l("font-awesome-icon"),s=l("el-tag"),c=l("el-descriptions-item"),k=l("el-descriptions"),R=l("el-collapse-item");return a(),t(g,null,[d(" evidence block "),n(R,{name:"5"},{title:u((()=>[_("div",Xe,[n(i,{icon:"fa-solid fa-thumbtack"}),f(" "+b(p(m)("Evidence")),1)])])),default:u((()=>[p($)(p(r))?(a(),t("div",Ze,[(a(!0),t(g,null,y(p(r),((e,l)=>(a(),v(k,{key:l,column:"1",border:""},P({default:u((()=>[e.state?(a(),v(c,{key:0,label:p(m)("Status")},{default:u((()=>["Approved"===e.state?(a(),v(s,{key:0,type:"primary"},{default:u((()=>[f(b(p(m)("Approved")),1)])),_:1})):(a(),t("span",{key:1,class:U(e.class)},b(p(m)(e.state)),3))])),_:2},1032,["label"])):d("v-if",!0),"Rejected"===e.uploadReply?(a(),v(c,{key:1,label:p(m)("Rejection message")},{default:u((()=>[e.comments?(a(),t("span",Je,b(e.comments),1)):(a(),t("span",He,b(p(m)("There is no comments")),1))])),_:2},1032,["label"])):d("v-if",!0),e.uploadReply&&"Reviewing"!==e.uploadReply?(a(),v(c,{key:2,label:p(m)("Last review date")},{default:u((()=>[f(b(p(W)(e.reviewDate)),1)])),_:2},1032,["label"])):d("v-if",!0),e.uploadFiles.length?(a(),v(c,{key:3,label:p(m)("Last update date")},{default:u((()=>[f(b(p(W)(e.updateDate)),1)])),_:2},1032,["label"])):d("v-if",!0),e.uploadFiles.length?(a(),v(c,{key:4,label:p(m)("Evidence")},{default:u((()=>[(a(!0),t(g,null,y(e.uploadFiles,((e,o)=>(a(),t("div",{key:o,class:"evidence-container"},[_("a",{class:"ce-link",href:`${w}/${l}/${e.fileName}`,download:e.originalName,target:"_blank"},[_("div",null,[n(p(V),{class:"mr-1"}),f(" "+b(e.originalName),1)]),-1!==h.indexOf(e.ext.toLowerCase())?(a(),t("div",el,[_("img",{src:`${w}/${l}/${e.fileName}`},null,8,ll)])):d("v-if",!0)],8,Qe)])))),128))])),_:2},1032,["label"])):d("v-if",!0)])),_:2},[e.title?{name:"title",fn:u((()=>[_("div",null,[n(i,{icon:"fa-solid fa-paperclip"}),f(" "+b(e.title),1)])])),key:"0"}:void 0]),1024)))),128))])):d("v-if",!0)])),_:1})],2112)}}},[["__scopeId","data-v-f4c0571e"],["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/EvidenceBlock.vue"]]),tl={class:"detail-collapse"},nl={key:0,class:"ce-gray-color-italic"},ol={key:1},il={key:0,class:"ce-gray-color-italic"},sl={key:1},cl=e({__name:"CancelBlock",setup(e){const i=D(),s=o({}),r={Approved:"primary",Rejected:"info",Reviewing:"warning"};return c((()=>{s.value=i.getCancellation?i.getCancellation:{}})),(e,o)=>{const i=l("font-awesome-icon"),c=l("el-descriptions-item"),y=l("el-tag"),w=l("el-descriptions"),h=l("el-collapse-item");return a(),t(g,null,[d(" cancellation block "),p($)(p(s))?(a(),v(h,{key:0,name:"2"},{title:u((()=>[_("div",tl,[n(i,{icon:"fa-solid fa-thumbtack"}),f(" "+b(p(m)("Cancellation")),1)])])),default:u((()=>[_("div",null,[n(w,{column:"2",border:""},{default:u((()=>[n(c,{label:p(m)("Application date")},{default:u((()=>[f(b(p(W)(p(s).applyDate)),1)])),_:1},8,["label"]),n(c,{label:p(m)("Applicant")},{default:u((()=>[f(b(p(s).applicantName),1)])),_:1},8,["label"]),n(c,{label:p(m)("Reason")},{default:u((()=>[p(s).reason&&""!==p(s).reason?(a(),t("span",ol,b(p(s).reason),1)):(a(),t("span",nl,b(p(m)("There is no reason")),1))])),_:1},8,["label"]),n(c,{label:p(m)("Status")},{default:u((()=>[n(y,{type:r[p(s).result]},{default:u((()=>[f(b(p(m)(p(s).result)),1)])),_:1},8,["type"])])),_:1},8,["label"]),p(s).reviewDate?(a(),v(c,{key:0,label:p(m)("Review date")},{default:u((()=>[f(b(p(W)(p(s).reviewDate)),1)])),_:1},8,["label"])):d("v-if",!0),"Rejected"===p(s).result?(a(),v(c,{key:1,label:p(m)("Rejection message")},{default:u((()=>[p(s).comments&&""!==p(s).comments?(a(),t("span",sl,b(p(s).comments),1)):(a(),t("span",il,b(p(m)("There is no comments")),1))])),_:1},8,["label"])):d("v-if",!0)])),_:1})])])),_:1})):d("v-if",!0)],2112)}}},[["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/components/CancelBlock.vue"]]),rl={key:1,class:"ce-main-container"},dl=e({__name:"index",setup(e){const i=s().params.reqNo,r=D(),m=o(""),f=["Reviewing","Rejected","Returned"],b=o(!1),g=o(["1","2","3","4","5"]);return c((async()=>{b.value=!0,r.setReqNo(i),await r.getReqInfo(),m.value=r.getReqStatus,setTimeout((()=>b.value=!1),1500)})),(e,o)=>{const i=l("el-collapse");return a(),t("div",null,[n(p(S),{loading:p(b)},null,8,["loading"]),d(" top title & functional buttons "),p(b)?d("v-if",!0):(a(),v(p(pe),{key:0})),d(" content "),p(b)?d("v-if",!0):(a(),t("div",rl,[n(i,{modelValue:p(g),"onUpdate:modelValue":o[0]||(o[0]=e=>w(g)?g.value=e:null)},{default:u((()=>[n(p(we)),n(p(cl)),n(p(Ce)),f.includes(p(m))?d("v-if",!0):(a(),v(p(Ge),{key:0})),f.includes(p(m))?d("v-if",!0):(a(),v(p(al),{key:1}))])),_:1},8,["modelValue"])]))])}}},[["__scopeId","data-v-3316eea4"],["__file","C:/Program Files/Workspace/reqm-vue3/src/views/detail/index.vue"]]);export{dl as default};
